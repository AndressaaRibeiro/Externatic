{"version":3,"file":"index.module.js","sources":["../src/index.js"],"sourcesContent":["import Plugin from '@swup/plugin';\n\nexport default class DebugPlugin extends Plugin {\n\tname = 'DebugPlugin';\n\n\tdefaultOptions = {\n\t\tglobalInstance: false\n\t};\n\n\tconstructor(options = {}) {\n\t\tsuper();\n\n\t\tthis.options = {\n\t\t\t...this.defaultOptions,\n\t\t\t...options\n\t\t};\n\n\t\tif (!document.getElementsByTagName('title').length) {\n\t\t\tconst error = \"This page doesn't have title tag. Title tag is required in every page.\";\n\t\t\tconsole.warn(`DEBUG PLUGIN: ${error}`);\n\t\t}\n\t}\n\n\tmount() {\n\t\tconst swup = this.swup;\n\n\t\t// set non-empty log method of swup\n\t\tswup.log = this.log;\n\n\t\t// set swup instance as a global variable swup\n\t\tif (this.options.globalInstance) {\n\t\t\twindow.swup = swup;\n\t\t}\n\n\t\t// make events appear in console\n\t\tswup._triggerEvent = swup.triggerEvent;\n\t\tswup.triggerEvent = this.triggerEvent;\n\n\t\t// detect relative links not starting with / or #\n\t\tconst potentiallyWrongLinksSelector =\n\t\t\t'a[href]:not([href^=\"' +\n\t\t\twindow.location.origin +\n\t\t\t'\"]):not([href^=\"/\"]):not([href^=\"http\"]):not([href^=\"/\"]):not([href^=\"?\"]):not([href^=\"#\"])';\n\n\t\tswup.on('pageView', () => {\n\t\t\tif (document.querySelectorAll(potentiallyWrongLinksSelector).length) {\n\t\t\t\tconst error =\n\t\t\t\t\t'It seems there are some links with a href attribute not starting with \"#\", \"/\" or current domain, which is potentially a problem.';\n\t\t\t\tconsole.warn(\n\t\t\t\t\t`DEBUG PLUGIN: ${error}`,\n\t\t\t\t\tdocument.querySelectorAll(potentiallyWrongLinksSelector)\n\t\t\t\t);\n\t\t\t}\n\t\t\tif (document.querySelectorAll(potentiallyWrongLinksSelector).length) {\n\t\t\t\tconst error =\n\t\t\t\t\t'It seems there are some links with a href attribute not starting with \"#\", \"/\" or current domain, which is potentially a problem.';\n\t\t\t\tconsole.warn(\n\t\t\t\t\t`DEBUG PLUGIN: ${error}`,\n\t\t\t\t\tdocument.querySelectorAll(potentiallyWrongLinksSelector)\n\t\t\t\t);\n\t\t\t}\n\t\t});\n\t}\n\n\tunmount() {\n\t\tthis.swup.log = () => {};\n\t\tthis.swup.triggerEvent = this.swup._triggerEvent;\n\t\tif (this.options.globalInstance) {\n\t\t\twindow.swup = null;\n\t\t}\n\t}\n\n\ttriggerEvent = (eventName, originalEvent) => {\n\t\tif (originalEvent) {\n\t\t\tconsole.groupCollapsed(\n\t\t\t\t'%cswup:' + '%c' + eventName,\n\t\t\t\t'color: #343434',\n\t\t\t\t'color: #009ACD'\n\t\t\t);\n\t\t\tconsole.log(originalEvent);\n\t\t\tconsole.groupEnd();\n\t\t} else {\n\t\t\tconsole.log('%cswup:' + '%c' + eventName, 'color: #343434', 'color: #009ACD');\n\t\t}\n\n\t\tthis.swup._triggerEvent(eventName, originalEvent);\n\t};\n\n\tlog = (str, object) => {\n\t\tif (object) {\n\t\t\tconsole.groupCollapsed(str);\n\t\t\tfor (let key in object) {\n\t\t\t\tconsole.log(object[key]);\n\t\t\t}\n\t\t\tconsole.groupEnd();\n\t\t} else {\n\t\t\tconsole.log(str + '%c', 'color: #009ACD');\n\t\t}\n\t};\n\n\tdebugLog = (log, type) => {\n\t\tif (type === 'error') {\n\t\t\tconsole.error(`DEBUG PLUGIN: ${log}`);\n\t\t} else {\n\t\t\tconsole.warn(`DEBUG PLUGIN: ${log}`);\n\t\t}\n\t};\n}\n"],"names":["DebugPlugin","Plugin","constructor","options","super","this","name","defaultOptions","globalInstance","triggerEvent","eventName","originalEvent","console","groupCollapsed","log","groupEnd","swup","_triggerEvent","str","object","key","debugLog","type","error","warn","document","getElementsByTagName","length","mount","window","potentiallyWrongLinksSelector","location","origin","on","querySelectorAll","unmount"],"mappings":"4BAEe,MAAMA,UAAoBC,EAOxCC,YAAYC,QAAO,IAAPA,IAAAA,EAAU,IACrBC,QAAQC,KAPTC,KAAO,cAAaD,KAEpBE,eAAiB,CAChBC,gBAAgB,GAkEjBC,KAAAA,aAAe,CAACC,EAAWC,KACtBA,GACHC,QAAQC,eACP,YAAmBH,EACnB,iBACA,kBAEDE,QAAQE,IAAIH,GACZC,QAAQG,YAERH,QAAQE,IAAI,YAAmBJ,EAAW,iBAAkB,kBAG7DL,KAAKW,KAAKC,cAAcP,EAAWC,EAAa,OAGjDG,IAAM,CAACI,EAAKC,KACX,GAAIA,EAAQ,CACXP,QAAQC,eAAeK,GACvB,IAAK,IAAIE,KAAOD,EACfP,QAAQE,IAAIK,EAAOC,IAEpBR,QAAQG,UACT,MACCH,QAAQE,IAAII,EAAM,KAAM,iBACzB,EAGDG,KAAAA,SAAW,CAACP,EAAKQ,KACH,UAATA,EACHV,QAAQW,MAAO,iBAAgBT,KAE/BF,QAAQY,KAAM,iBAAgBV,IAC/B,EA7FAT,KAAKF,QAAU,IACXE,KAAKE,kBACLJ,GAGCsB,SAASC,qBAAqB,SAASC,QAE3Cf,QAAQY,KAAM,uFAEhB,CAEAI,QACC,MAAMZ,EAAOX,KAAKW,KAGlBA,EAAKF,IAAMT,KAAKS,IAGZT,KAAKF,QAAQK,iBAChBqB,OAAOb,KAAOA,GAIfA,EAAKC,cAAgBD,EAAKP,aAC1BO,EAAKP,aAAeJ,KAAKI,aAGzB,MAAMqB,EACL,uBACAD,OAAOE,SAASC,OAChB,8FAEDhB,EAAKiB,GAAG,WAAY,KACfR,SAASS,iBAAiBJ,GAA+BH,QAG5Df,QAAQY,KACN,kJACDC,SAASS,iBAAiBJ,IAGxBL,SAASS,iBAAiBJ,GAA+BH,QAG5Df,QAAQY,KACN,kJACDC,SAASS,iBAAiBJ,GAE5B,EAEF,CAEAK,UACC9B,KAAKW,KAAKF,IAAM,OAChBT,KAAKW,KAAKP,aAAeJ,KAAKW,KAAKC,cAC/BZ,KAAKF,QAAQK,iBAChBqB,OAAOb,KAAO,KAEhB"}